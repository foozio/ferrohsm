# Publishing FerroHSM on Homebrew

This document explains how to publish FerroHSM on Homebrew for macOS and Linux users.

## Prerequisites

1. A GitHub account
2. Homebrew installed on your development machine
3. The `ferrohsm.rb` formula file (already generated in `dist/homebrew/`)

## Option 1: Create Your Own Tap (Recommended)

Creating your own tap is the quickest way to distribute FerroHSM without waiting for official Homebrew approval.

### Steps:

1. Create a new GitHub repository named `homebrew-ferrohsm`
2. Copy the `ferrohsm.rb` formula files (for both macOS and Linux) to the root of this repository
3. Commit and push the files to GitHub
4. Users can now install FerroHSM with:
   ```bash
   # macOS
   brew tap foozio/ferrohsm
   brew install ferrohsm
   
   # Linux
   brew install ./dist/homebrew-linux/ferrohsm.rb
   ```

## Option 2: Submit to Homebrew Core

To submit to the official Homebrew repository:

1. Fork the [homebrew-core](https://github.com/Homebrew/homebrew-core) repository
2. Create a new branch for your formula
3. Add the `ferrohsm.rb` formula to the `Formula/` directory
4. Commit your changes with a message like: "ferrohsm: add 0.2.1"
5. Create a pull request to the homebrew-core repository

Requirements for homebrew-core submission:
- Project must have at least 75 GitHub stars
- Project must be notable and actively maintained
- Formula must follow Homebrew's formatting conventions

## Updating the Formula

When releasing a new version of FerroHSM:

1. Run `scripts/package_homebrew.sh` with the new version number:
   ```bash
    ./scripts/package_homebrew.sh 0.4.0
   ```
   
2. Upload the generated tarball to GitHub Releases

3. Update the formula with:
   - New version number
   - Updated URL pointing to the new release
   - New SHA256 checksum (generated by the script)

## Testing the Formula

To test the formula locally:

```bash
# If using your own tap
brew tap foozio/ferrohsm
brew install --build-from-source ferrohsm

# Test the installation
ferrohsm --help
```

See [installation.md](installation.md) for user installation instructions.